<p-toast></p-toast>
<p-progressSpinner *ngIf="loading"></p-progressSpinner>

<div class="row" style="padding-top: 2px">
  <div class="col-md-4">
    <p-breadcrumb [model]="items" [home]="home"></p-breadcrumb>
  </div>
  <!-- <div class="col-md-2"><span>Sector:</span></div>
  <div class="col-md-2">
    <input type="text" pInputText [(ngModel)]="sectorName" placeholder="Sector Name"/>
  </div>
-->
<div class="col-md-1"><span>Date: </span></div>
<div class="col-md-2">
  <p-calendar
    [disabledDays]="[0, 6]"
    [(ngModel)]="searchDate"
    [showIcon]="true"
    inputId="icon"
  ></p-calendar>
</div>

  <div class="col-md-2">
    <p-button (onClick)="searchRecords()" label="Search"></p-button>
  </div>

</div>
<div class="card">
  <p-table
    [value]="sectorstocks"
    styleClass="p-datatable-gridlines"
  >
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="date">Date<p-sortIcon field="date"></p-sortIcon></th>
        <th pSortableColumn="code">Stock<p-sortIcon field="code"></p-sortIcon></th>
        <th pSortableColumn="close">Price<p-sortIcon field="Close"></p-sortIcon></th>
        <th pSortableColumn="percentage">%<p-sortIcon field="percentage"></p-sortIcon></th>
        <th pSortableColumn="weekly">Weekly<p-sortIcon field="weekly"></p-sortIcon></th>
        <th pSortableColumn="monthly">Monthly<p-sortIcon field="monthly"></p-sortIcon></th>
        <th pSortableColumn="totalTradedQty">Vol<p-sortIcon field="totalTradedQty"></p-sortIcon></th>
        <th>Candle</th>
        <th>Avg Vol</th>
        <th>Market Cap</th>
        <th>Industry</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-sector let-rowIndex="rowIndex">
      <tr>
        <td>{{ sector.date | date: "yyyy-MM-dd" }}</td>
        <td style="cursor: pointer; text-decoration: underline;" (click)= "showStock(sector.code)">{{ sector.code }}</td>
        <td>{{ sector.close}}</td>
        <td
        [ngClass]="{
          positive: sector.percentage > 0,
          negative: sector.percentage < 0
        }"
      >
        {{ sector.percentage }}%
      </td>

      <td
      [ngClass]="{
        positive: sector.weekly > 0,
        negative: sector.weekly < 0
      }"
    >
      {{ sector.weekly }}%
    </td>
    <td
      [ngClass]="{
        positive: sector.monthly > 0,
        negative: sector.monthly < 0
      }"
    >
      {{ sector.monthly }}%
    </td>
    <td>{{ sector.totalTradedQty}}</td>
        <td>{{ sector.reason}}</td>
        <td>{{ sector.avgVolume_30}}</td>
        <td>{{ sector.marketCap}}</td>
        <td>{{ sectorType === 'sector' ? sector.industry : sector.sector}}</td>
            </tr>
    </ng-template>
  </p-table>
</div>
